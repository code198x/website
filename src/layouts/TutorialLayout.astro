---
// Specific layout for tutorial pages
// import Layout from './Layout.astro'; <-- No longer needed directly
import ArticleLayout from './ArticleLayout.astro'; // Import the new base article layout
import type { CollectionEntry } from 'astro:content';
// import PostNavigation from '../components/PostNavigation.astro'; // Handled by ArticleLayout

// Updated structure for related posts passed as props
interface RelatedItem {
  slug: string;
  title: string;
  collection: string; // Added collection
}

interface Props {
	entry: CollectionEntry<'tutorials'>; // Expects a tutorial entry
  prev: { slug: string; title: string } | null;
  next: { slug: string; title: string } | null;
  relatedPosts?: RelatedItem[]; // Use updated interface
}

const { entry, prev, next, relatedPosts } = Astro.props; // Destructure relatedPosts
const { title, description, publishDate, platform, tags } = entry.data;
const contentType = 'tutorials';
---
<ArticleLayout
  title={title}
  contentType={contentType}
  prev={prev}
  next={next}
  relatedPosts={relatedPosts} // Pass relatedPosts down
  pageTitle={`${title} - Tutorials - Code 198x`}
  prevText="&larr; Previous Tutorial"
  nextText="Next Tutorial &rarr;"
>
  {/* Tutorial metadata goes into the 'metadata-below-title' slot */}
  <Fragment slot="metadata-below-title">
    {description && <p class="description">{description}</p>}
    <p class="publish-date">Published: 
      <time datetime={publishDate.toISOString()}>
        {publishDate.toLocaleDateString('en-us', { year: 'numeric', month: 'short', day: 'numeric' })}
      </time>
    </p>
    {platform && platform.length > 0 && <p class="platforms">Platform(s): {platform.join(', ')}</p>}
    {tags && tags.length > 0 && <p class="tags">Tags: {tags.join(', ')}</p>}
  </Fragment>

	<slot /> {/* Tutorial content goes into the default slot */}

</ArticleLayout>

{/* Styles specific to TutorialLayout can remain */}
<style>
	/* Keep styles specific only to tutorial pages, e.g., metadata formatting */
	.description, .publish-date, .platforms, .tags {
		margin-bottom: 0.25em; /* Tighter spacing for metadata */
    font-size: 0.9em;
    color: var(--color-text-muted); /* Example: Muted color */
	}
  .description {
    font-style: italic;
  }
</style> 