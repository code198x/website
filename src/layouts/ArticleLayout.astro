---
// src/layouts/ArticleLayout.astro
// Base layout for content pages like concepts, platforms, tutorials, blog posts
import Layout from './Layout.astro';
import PostNavigation from '../components/PostNavigation.astro';
import RelatedPosts from '../components/RelatedPosts.astro';

// Updated structure for related posts passed as props
interface RelatedItem {
  slug: string;
  title: string;
  collection: string; // Added collection
}

interface Props {
  title: string;
  contentType: 'concepts' | 'platforms' | 'tutorials' | 'blog';
  prev: { slug: string; title: string } | null | undefined;
  next: { slug: string; title: string } | null | undefined;
  relatedPosts?: RelatedItem[]; // Use updated interface
  // Optional props for customizing navigation text
  prevText?: string;
  nextText?: string;
  // Optional: Pass the full base layout title
  pageTitle?: string;
}

const { 
  title, 
  contentType, 
  prev, 
  next, 
  relatedPosts, // Destructure relatedPosts
  prevText, 
  nextText, 
  pageTitle = `${title} - Code 198x` // Default page title structure
} = Astro.props;
---
<Layout title={pageTitle}>
  <article>
    <slot name="metadata-header" /> {/* Optional slot for metadata before the title */}
    <h1>{title}</h1>
    <slot name="metadata-below-title" /> {/* Optional slot for metadata below the title */}
    <hr />
    <slot /> {/* Main content goes here */}

    {/* Render RelatedPosts if available */}
    {relatedPosts && relatedPosts.length > 0 && (
      <RelatedPosts relatedPosts={relatedPosts} />
    )}

    {/* Use the PostNavigation component */}
    <PostNavigation 
      contentType={contentType} 
      prev={prev} 
      next={next} 
      prevText={prevText}
      nextText={nextText}
    />
  </article>
</Layout>

<style>
  /* Basic shared styles for article layouts */
  article {
    /* Consider adding common article styles here */
    max-width: 80ch; /* Example: Limit content width */
    margin: 0 auto; /* Example: Center content */
    padding: 1rem;
  }
  h1 {
    margin-bottom: 0.5em;
  }
  p {
    margin-bottom: 0.5em;
    line-height: 1.6;
  }
  hr {
      border: none;
      border-top: 1px solid var(--color-border); /* Adjust color as needed */
      margin: 2rem 0;
  }
  /* Styles for slots can be added if needed, but usually handled by content */
</style> 