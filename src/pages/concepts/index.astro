// import Layout from '../../layouts/Layout.astro'; // No longer needed directly
import ListPageLayout from '../../layouts/ListPageLayout.astro'; // Use the new layout
import Pagination from '../../components/Pagination.astro'; // Import the pagination component
import { getCollection } from 'astro:content';
import { Fragment } from 'astro/components';

// Astro expects a `getStaticPaths` function for paginated routes
export async function getStaticPaths({ paginate }) {
	const concepts = await getCollection('concepts');
	// Sort concepts by title
	concepts.sort((a, b) => a.data.title.localeCompare(b.data.title));

	return paginate(concepts, { pageSize: 10 });
}

// The page prop comes from getStaticPaths
const { page } = Astro.props;

const pageTitle = "Concepts - Code 198x";
const pageDescription = "Understanding the basics of computing and programming.";

<ListPageLayout
	title={pageTitle}
	description={pageDescription}
	items={page.data} // Pass the paginated data
>
	<Fragment slot="list-item" let:item={concept}>
		<a href={`/concepts/${concept.slug}`} class="item-title">{concept.data.title}</a>
	</Fragment>

  {/* Add Pagination component below the list */}
  <Pagination page={page} />
</ListPageLayout>

<style>
	/* Add specific styles for the concept list items */
	.item-title {
		font-size: 1.2em; /* Consistent with other lists */
		text-decoration: none;
		display: block;
	}
	.item-title:hover {
		text-decoration: underline;
	}
	/* Remove specific styling for li if handled globally */
</style> 