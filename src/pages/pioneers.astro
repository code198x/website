import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';

const companies = await getCollection('pioneers/companies');
const individuals = await getCollection('pioneers/individuals');

// Sort companies and individuals by title
const sortedCompanies = companies.sort((a, b) => a.data.title.localeCompare(b.data.title));
const sortedIndividuals = individuals.sort((a, b) => a.data.title.localeCompare(b.data.title));

<BaseLayout title="Computing Pioneers" description="Key figures and companies from the home computer revolution">
    <main class="container mx-auto px-4 py-8">
        <h1 class="text-4xl font-bold mb-8">Computing Pioneers</h1>
        
        <div class="mb-12">
            <h2 class="text-3xl font-semibold mb-6">Companies</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {sortedCompanies.map((company) => (
                    <div class="border rounded-lg p-6 hover:shadow-lg transition-shadow">
                        <h3 class="text-xl font-semibold mb-2">{company.data.title}</h3>
                        <p class="text-gray-600 mb-4">{company.data.description}</p>
                        <div class="text-sm">
                            {company.data.founded && (
                                <p>Founded: {company.data.founded}</p>
                            )}
                            {company.data.defunct && (
                                <p>Defunct: {company.data.defunct}</p>
                            )}
                        </div>
                        <div class="mt-4">
                            <a href={`/pioneers/companies/${company.slug}`} class="text-blue-600 hover:text-blue-800">
                                Read more →
                            </a>
                        </div>
                    </div>
                ))}
            </div>
        </div>

        <div class="mb-12">
            <h2 class="text-3xl font-semibold mb-6">Individuals</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {sortedIndividuals.map((individual) => (
                    <div class="border rounded-lg p-6 hover:shadow-lg transition-shadow">
                        <h3 class="text-xl font-semibold mb-2">{individual.data.title}</h3>
                        <p class="text-gray-600 mb-4">{individual.data.description}</p>
                        <div class="text-sm">
                            {individual.data.birth && (
                                <p>Born: {individual.data.birth}</p>
                            )}
                            {individual.data.death && (
                                <p>Died: {individual.data.death}</p>
                            )}
                        </div>
                        <div class="mt-4">
                            <a href={`/pioneers/individuals/${individual.slug}`} class="text-blue-600 hover:text-blue-800">
                                Read more →
                            </a>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    </main>
</BaseLayout> 